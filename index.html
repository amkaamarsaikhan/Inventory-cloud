<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>InvCloud - 库存管理系统</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

    <aside class="sidebar no-print" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">📦 InvCloud</div>
            <button class="close-btn" onclick="toggleSidebar()">✕</button>
        </div>
        <div class="sidebar-content">
            <div id="loginSection">
                <h4>管理员登录</h4>
                <input type="email" id="loginEmail" placeholder="电子邮件">
                <input type="password" id="loginPass" placeholder="密码">
                <button onclick="login()" class="btn-primary">登录</button>
            </div>

            <div id="addSection" style="display:none;">
                <h4>添加 / 编辑商品</h4>
                <input type="text" id="itemName" placeholder="商品名称">
                <input type="number" id="itemPrice" placeholder="单价 (¥)">

                <div id="variantInputs">
                </div>
                <button class="btn-add-variant" onclick="addVariantInput()">➕ 添加更多颜色</button>

                <div class="file-drop" onclick="document.getElementById('itemImage').click()">
                    <span id="fileText">📸 选择图片</span>
                    <input type="file" id="itemImage" accept="image/*" style="display:none">
                </div>
                <div id="preview"></div>

                <button id="addBtn" class="btn-primary">💾 保存商品</button>

                <hr style="margin: 20px 0; border: 0; border-top: 1px solid var(--border);">

                <button onclick="window.print()" class="btn-print">📄 生成 PDF 报告</button>
                <button onclick="showHistory()" class="btn-secondary" style="margin-top:10px; width:100%;">📜
                    查看销售历史</button>
                <button onclick="logout()" class="btn-danger" style="margin-top:20px; width:100%;">🚪 退出登录</button>
            </div>
        </div>
    </aside>

    <div id="historyModal" class="modal no-print">
    <div class="modal-content">
        <div id="historyList"></div> 
        <button onclick="closeHistory()" class="btn-primary" style="margin-top:20px;">关闭 (Хаах)</button>
    </div>
</div>

    <main class="main">
        <header class="header-controls no-print">
            <div class="top-row">
                <button class="menu-btn" onclick="toggleSidebar()">☰ 菜单</button>
                <div class="total-badge">
                    <small>总资产</small>
                    <span id="total">¥0</span>
                </div>
            </div>
            <div class="search-row">
                <input type="text" id="searchInput" placeholder="🔍 搜索商品..." oninput="searchItems()">
            </div>
        </header>

        <div id="inventoryGrid" class="grid"></div>
    </main>

    <button id="darkModeToggle" class="fab-theme no-print" onclick="toggleDarkMode()">
        <span id="modeIcon">🌙</span>
    </button>

    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>
    <script src="script.js"></script>
</body>

</html>